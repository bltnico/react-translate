/** React Translate 
 * @author bltnico 
 * @repository https://github.com/bltnico/react-translate 
 */ 
if(void 0!=window.ReactTranslate)throw Error("[ReactTranslate] ReactTranslate is already defined.");window.ReactTranslate={defaultLocale:"en_US",currentLocale:"",fallbackLocale:"en_US",availableLocale:[],detectNavigatorLocale:!0,useLocalStorage:!0};try{var onTranslationChange=document.createEvent("Event");onTranslationChange.initEvent("onTranslationChange",!0,!0),onTranslationChange.locale=""}catch(e){throw Error("[ReactTranslate] "+e)}var TranslateMixin={xhr:function(opts,callback){opts.method=opts.method||"GET",opts.url=opts.url||"/";var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){return 4==xhr.readyState&&200==xhr.status?callback(xhr.responseText):void 0},xhr.open(opts.method,opts.url,!0),xhr.send()},loadExternalFile:function(lang,url){this.xhr({url:url},function(translation){window.ReactTranslate[lang]=JSON.parse(translation)})},isValidLocale:function(locale){return window.ReactTranslate.hasOwnProperty(locale)},getLocale:function(){if(void 0!==window.ReactTranslate.currentLocale){if(this.isValidLocale(window.ReactTranslate.currentLocale))return window.ReactTranslate.currentLocale}else if(void 0!==window.ReactTranslate.fallbackLocale){if(this.isValidLocale(window.ReactTranslate.fallbackLocale))return window.ReactTranslate.fallbackLocale}else if(void 0!==window.ReactTranslate.defaultLocale)return window.ReactTranslate.defaultLocale}},Translate=React.createClass({displayName:"Translate",mixins:[TranslateMixin],statics:{initTranslation:function(locale){if(!window.ReactTranslate.useLocalStorage){if(locale)return Translate.setLocale(locale);throw Error("[ReactTranslate] Empty locale for 'initTranslation' method")}return void 0!==window.localStorage&&localStorage.getItem("__react_translate")?Translate.setLocale(localStorage.getItem("__react_translate")):void 0},registerTranslation:function(locale,translation){return window.ReactTranslate[locale]=translation},registerExternalTranslation:function(lang,url){return TranslateMixin.loadExternalFile(lang,url)},autoDetectLocale:function(bool){if(bool=bool||window.ReactTranslate.detectNavigatorLocale||!0){var locale=window.navigator.userLanguage||window.navigator.language;return window.ReactTranslate.currentLocale=locale}return window.ReactTranslate.detectNavigatorLocale=bool},setLocale:function(locale){if(this.getAvailableLocale().length>0){this.getAvailableLocale();return window.ReactTranslate.useLocalStorage&&localStorage.setItem("__react_translate",locale),window.ReactTranslate.currentLocale=locale}return window.ReactTranslate.currentLocale=locale},getLocale:function(){return window.ReactTranslate.currentLocale},setDefaultLocale:function(locale){return window.ReactTranslate.defaultLocale=locale},setFallbackLocale:function(locale){return window.ReactTranslate.fallbackLocale=locale},setAvailableLocales:function(locales){return"object"==typeof locales?window.ReactTranslate.availableLocale=locales:void 0},getAvailableLocale:function(){return window.ReactTranslate.availableLocale},updateTranslation:function(locale){if(locale)return Translate.setLocale(locale),onTranslationChange.locale=locale,document.dispatchEvent(onTranslationChange);throw Error("[ReactTranslate] Empty locale for 'updateTranslation' method")},useLocalStorage:function(bool){return window.ReactTranslate.useLocalStorage=bool}},propTypes:{element:React.PropTypes.string,from:React.PropTypes.string.isRequired},getDefaultProps:function(){return{element:"span"}},getInitialState:function(){return{element:this.props.element}},componentWillMount:function(){if(this.props.locale){if(!this.isValidLocale(this.props.locale))throw Error("[ReactTranslate] Unknow locale : '"+this.props.locale+"'");this.setState({locale:this.props.locale})}else this.setState({locale:this.getLocale()});var that=this;document.addEventListener("onTranslationChange",function(e){that.setState({locale:e.locale})},!1)},render:function(){var translation=window.ReactTranslate[this.state.locale][this.props.from];return"input"==this.state.element||"textarea"==this.state.element?React.createElement(this.state.element,{placeholder:translation},null):React.createElement(this.state.element,null,translation)}});